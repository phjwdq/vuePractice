<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>baiduJsonp</title>
	<style>
		.bgcolor{
			background-color: #ccc;
		}
	</style>
</head>
<!-- 百度 -->
<!-- https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=a&cb=jQuery110207770770979028545_1506736563668&_=1506736563672 -->
<body>
	<div id="box">
		<!-- keyup?? -->
		<input type="text" v-model="str" @keyup="keyfun($event)" @keydown.down="downfun()" @keydown.up.prevent="upfun()">

<!-- 注意
复合属性一定要使用驼峰式命名！！ -->
		<ul v-for="item in arr" :style="{listStyle:'none'}">

			<!-- class的{}中是json 
			bgcolor是style的类名
			:后面是 样式成立的条件 -->

			<li :class="{bgcolor:$index==nowIndex}">
				{{item}}
			</li>
		</ul>

		<!-- <p v-if="arr.length==0">暂无数据...</p> -->
		<!-- 或者 -->
		<p v-show="arr.length==0">暂无数据...</p>
	</div>
</body>
<script type="text/javascript" src="js/vue.js"></script>
<script type="text/javascript" src="js/vue-resource.js"></script>
<script type="text/javascript">
	window.onload = function(){
		var vm = new Vue({
			el:"#box",
			data:{
				arr:[],
				str:'',
				nowIndex:-1
			},
			methods:{
				keyfun:function(ev){
					if(ev.keyCode==38||ev.keyCode==40){
						// 注意此时不进行任何操作
						// 并且return 
						return;
					}else if(ev.keyCode==13){
						// 注意
						// 此时打开的连接是网页！！ 不是数据接口
						window.open("http://www.baidu.com/s?wd="+this.str);
						this.str='';
					}
					// 数据接口
					this.$http.jsonp("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su",{
						wd:this.str
					},{
						jsonp:'cb'
					}).then(function(res){
						// alert(res.status);
						this.arr = res.data.s;
					},function(err){
						alert(err.status);
						alert(err);
					});
				},
				downfun:function(){
				// 注意 methods方法中很多次用到this!!
					this.nowIndex++;
					if(this.nowIndex==this.arr.length){
						this.nowIndex = -1;
					}
					this.str = this.arr[this.nowIndex];
				},
				upfun:function(){
					this.nowIndex--;
					if(this.nowIndex==-2){
						this.nowIndex = this.arr.length-1;
					}
					this.str = this.arr[this.nowIndex];
				}
			}
		});
	}
</script>
</html>